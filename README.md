# NT-OS

<h2>NT-OSは、x86系CPUで動作するOSです。</h2>

<h2>開発きっかけ</h2>
自分でも作ってみたくなった。
とりあえず、FAT12ファイルシステムやコンソールを実装することを目標にスピード重視で開発しています。
<h2>注意!!</h2>
このOSは、現在進行形で作っているソフトウェアなので、ところどころおかしな記述が見られますがお許しください。
参考になるファイルは、floppy.cとdma.cとfs.c(FAT12ファイルシステム実装中)かと思います。
<p>このページをどう構成するか決まっていないので、ほぼ殴りかきでメモとして残している状態です。</p>
<p><strong>kernelフォルダの中のソースコードを参考にしてください!!</strong></p>
<h3>現在実装した機能</h3>
<p>デバイスドライバ:</p>
<p><strong>フロッピードライバ(floppy.c)</strong></p>
        LBA方式でセクタを読み書きできるように、read_lbaとread_writeを実装しました。
<p><strong>DMAドライバ(dma.c)</strong></p>
フロッピーディスクの読み書きの制御を行うドライバです。
<p><strong>FAT12フォーマットのファイル保存実装</strong></p>
   vimコマンドで立ち上げたファイルをcrtl+sでFAT12フォーマットに対応したファイル保存するようにしました。(2019年10/31)
   任意のファイル名で保存できるように変更する予定。
      
<p>フォント:</p>
    <p>0~9のフォントを用意</p>
    <p>A~Pのフォントを用意(残りは後日実装予定)</p>
    <p>ASCII対応の配列を用意しました。font_ASCII配列を利用していただければ、ASCII_CODE指定での描画が可能です。</p>
    <p>1から全てフォントを作成する予定のため、全て揃えるのにもう少し時間がかかります。</p>
    
<h3>現在実装中の機能</h3>
    <p>コンソール</p>
    vimコマンドがあるので、テキストエディタで遊べます
    <p>ファイルシステム(floppy disk formatted on FAT12)</p>
    <p>ページング</p>
    ファイルシステム(fs.c)ではなくconsole.cの方にファイルシステムの実装を行なっていますが、動作が確認できたらfs.cに移行を進めるつもりです。
    <p>メモリ管理</p>
    メモリ管理を実装していないので、僕自身がメモリ管理になっていて非常に辛い状況です。。。(FAT12ファイルシステムを実装してから、作り直す予定なので、その時は何かしらのメモリ管理を実装予定)
   <p>このOSの今後</p>
   公開したOSとは、別のOSを作ります。(リンカスクリプトを自分で書いたもので開発してみたいから)
<p>以下のURLは、僕が書いたフロッピディスクのデバイスドライバ入門記事です。参考にしてくれるとありがたいです。</p>
<p><a href="https://qiita.com/tetutetuman/items/50731863c08ddc307742">フロッピーデバイスドライバ入門</a></p>
※近々FAT12ファイルシステムにおいての、ファイル保存方法を記事にまとめるので、ぜひ寄ってみてください。

<p>参考文献</p>
1.  30日でできる!OS自作入門
2.  はじめて読む486

<h2>使い方</h2>
<p>環境→MacOS, qemu</p>
</p>brew install gcc-elf-i386を実行した後に、kernelの下でmake run</p>

![スクショ1](https://github.com/niwaka-os/NT-OS/tree/master/NT-OS1.png)


## License
MIT
